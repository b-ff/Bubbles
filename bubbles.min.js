function Bubbles(e){if(typeof e=="object"&&e.hasOwnProperty("style")){this.container=e}this.bubbles=new Array}Bubbles.prototype.addBubble=function(e,t,n,r){var i=typeof e=="undefined"&&parseInt(e)==NaN?0:typeof e=="number"?e:parseInt(e);var s=typeof t=="undefined"&&parseInt(t)==NaN?0:typeof t=="number"?t:parseInt(t);var o=typeof n=="undefined"?"Undefined text":n;var u=typeof r=="undefined"?["top","left"]:r;var a=this.hasOwnProperty("container")?this.container:document.getElementsByTagName("body")[0];var f=document.createElement("div");f.className="bubble "+u.join(" ");f.style.top=i+"px";f.style.left=s+"px";f.style.opacity=0;f.innerHTML=o;f.id="b"+this.bubbles.length;a.appendChild(f);var l=document.getElementById("b"+this.bubbles.length);if(l!=null){this.addEvent(l,"click",this.removeBubble);this.bubbles[this.bubbles.length]={top:i,left:s,directions:u,text:o,fadeIn:setInterval(this.showBubble,1)};return l}else{return false}};Bubbles.prototype.removeBubble=function(){if(Bubbles.killing){return false}var e=this;var t=parseInt(this.id.replace("b",""));var n=Bubbles.bubbles[t];if(n.fadeIn){clearInterval(n.fadeIn)}Bubbles.killing={bubbleID:t,intervalID:setInterval(Bubbles.hideBubble,1)}};Bubbles.prototype.showBubble=function(){var e=document.getElementById("b"+(Bubbles.bubbles.length-1));var t=Bubbles.bubbles[Bubbles.bubbles.length-1];var n=parseFloat(e.style.opacity);if(e.className.match("left")&&e.className.match("left")==null){e.style.left=Math.round(n*t.left)+"px"}if(e.className.match("top")){e.style.top=Math.round(n*t.top)+"px"}e.style.opacity=n+.02;if(n>1){clearInterval(t.fadeIn);delete t.fadeIn}};Bubbles.prototype.hideBubble=function(){var e=document.getElementById("b"+Bubbles.killing.bubbleID);var t=Bubbles.bubbles[Bubbles.killing.bubbleID];var n=parseFloat(e.style.opacity);if(e.className.match("left")&&e.className.match("left")==null){e.style.left=Math.round(n*t.left)+"px"}if(e.className.match("top")){e.style.top=Math.round(n*t.top)+"px"}e.style.opacity=n-.02;if(n<=.02){e.parentNode.removeChild(e);clearInterval(Bubbles.killing.intervalID);delete Bubbles.bubbles[Bubbles.killing.bubbleID];delete Bubbles.killing}};Bubbles.prototype.addEvent=function(e,t,n){if(e.addEventListener){e.addEventListener(t,n,false)}else{e.attachEvent("on"+t,function(){return n.call(e,window.event)})}}